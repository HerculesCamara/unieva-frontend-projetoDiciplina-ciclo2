<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <main>
        Fa칞a o login 游땕
        <button onclick="loginWithTwitter()">
            Logar com Twitter/X
            <svg viewBox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-lrsllp r-1nao33i r-16y2uox r-8kz0gk"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g></svg>
        </button>
    </main>

    <script>
      async function loginWithTwitter() {
        const requestTokenUrl = 'https://api.twitter.com/oauth/request_token';
        const callbackUrl = 'https://unieva-frontend-projeto-diciplina-ciclo2.vercel.app/'; // Substitua pela sua URL de callback

        const oauth = {
          consumer_key: '708682881439240196-CEaP2uIdtd1jtLCj5TSLgoXySXrWlLM',
          consumer_secret: 'mhPBjOMRGU19DNdNqsZvUgtvLP19J1GZ7ngDqDsxWHqs1',
          callback: callbackUrl
        };

        // Faz uma solicita칞칚o para obter um token de solicita칞칚o tempor치rio
        const response = await fetch(requestTokenUrl, {
          method: 'POST',
          headers: {
            'Authorization': 'OAuth oauth_callback="' + encodeURIComponent(oauth.callback) + '"',
          }
        });

        if (response.ok) {
          const data = await response.text();
          // Extrai o token de solicita칞칚o tempor치rio da resposta
          const requestToken = getRequestToken(data);
          // Armazena o token de solicita칞칚o tempor치rio no localStorage
          localStorage.setItem('requestToken', requestToken);
          // Redireciona o usu치rio para a p치gina de login do Twitter
          window.location.href = 'https://api.twitter.com/oauth/authenticate?oauth_token=' + requestToken;
        } else {
          console.error('Falha ao obter token de solicita칞칚o');
        }
      }

      // Fun칞칚o para extrair o token de solicita칞칚o tempor치rio da resposta
      function getRequestToken(response) {
        const match = response.match(/oauth_token=([^&]+)/);
        if (match && match[1]) {
          return match[1];
        } else {
          throw new Error('Token de solicita칞칚o n칚o encontrado na resposta');
        }
      }
    </script>
</body>
</html>